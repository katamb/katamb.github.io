<!DOCTYPE html>
<html lang="en">

<head>
    <!-- <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"> -->

    <!-- Add the title up top. -->
    <title>Cryptoapp</title>

</head>

<body>

    <div class="text">
        <h2>Crypto</h2>
    </div>

    <form>
        <!-- An area for the input text. -->
        <div>
            <label for="uInput">Write your text here: </label>
        </div>
        <div>
            <input type="text" id="uInput" name="uInput" placeholder="case-sensitive">
        </div>

        <!-- An area for the key. -->
        <div>
            <label for="uKey">If you have a key, enter it here: </label>
        </div>
        <div>
            <input type="text" id="uKey" name="uKey">
        </div>

        <!-- Buttons. -->
        <div>
            <!-- Encrypt button. -->
            <button id="encrypt" type="button" onclick="otpEncrypt()">OTP-encrypt</button>
            <!-- Decrypt button. -->
            <button id="decrypt" type="button" onclick="otpDecrypt()">OTP-decrypt</button>
        </div>
        <div>
            <button>SHA-2</button>
            <button>MD5</button>
        </div>
    </form>


    <form>
        <!-- An area for the output text. -->
        <div>
            <label for="output">Here's the hidden message: </label>
        </div>
        <div>
            <textarea id="output" name="output"></textarea>
        </div>
    </form>

    <script>
        function otpEncrypt() {
            // make key and input same length
            // take input and key values
            var input = document.getElementById("uInput").value;
            var key = document.getElementById("uKey").value;

            // if input length is 0 or key length is zero, do nothing
            if (input.length === 0 || key.length === 0) {
                return;
            }

            // if input is longer than key then start to repeat key until they are the same length
            if (input.length > key.length) {
                var i = 0;
                while (key.length < input.length) {
                    key = key + key[i];
                    i += 1;
                }
            // if key is longer use only the beginning of the key
            } else if (input.length < key.length) {
                    key = key.substring(0, input.length);
                }
            // change input and key to lowercase, makes it easier
            input = input.toLowerCase();
            key = key.toLowerCase();

            // chars available to be encrypted
            var chars = 'abcdefghijklmnopqrstuvwxyzõäöüžš0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZÕÄÖÜŽŠ';
            var amountOfChars = 74;
            var listOfInts = [];

            // take the index of the first letter in input and key from chars
            // add them together and do the modulo operation
            // add the numbers to list
            for (i = 0; i < input.length; i++) {
                var sum = (chars.indexOf(input[i]) + chars.indexOf(key[i])) % amountOfChars;
                listOfInts.push(sum);
            }

            var output = '';

            // for every value in list, take a letter from chars according to that value
            for (i = 0; i < listOfInts.length; i++) {
                output += chars.substring(listOfInts[i], listOfInts[i]+1);
            }

            // add the output value to the text field
            document.getElementById("output").value = output;
        }
    </script>
    <script>
        function otpDecrypt() {
            // make key and input same length
            // take input and key values
            var input = document.getElementById("uInput").value;
            var key = document.getElementById("uKey").value;

            // if input length is 0 or key length is zero, do nothing
            if (input.length === 0 || key.length === 0) {
                return;
            }

            // if input is longer than key then start to repeat key until they are the same length
            if (input.length > key.length) {
                var i = 0;
                while (key.length < input.length) {
                    key = key + key[i];
                    i += 1;
                }
                // if key is longer use only the beginning of the key
            } else if (input.length < key.length) {
                key = key.substring(0, input.length);
            }
            // change input and key to lowercase, makes it easier
            input = input.toLowerCase();
            key = key.toLowerCase();

            // chars available to be encrypted
            var chars = 'abcdefghijklmnopqrstuvwxyzõäöüžš0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZÕÄÖÜŽŠ';
            var amountOfChars = 74;
            var listOfInts = [];

            // take the index of the first letter in input and key from chars
            // subtract key from input
            // if result is negative, add amount of char to it
            // do the modulo operation
            // add the numbers to list
            for (i = 0; i < input.length; i++) {
                var sum = (chars.indexOf(input[i]) - chars.indexOf(key[i]));
                if (sum < 0) {
                    sum += amountOfChars;
                }
                sum = sum % amountOfChars;
                listOfInts.push(sum);
            }

            var output = '';

            // for every value in list, take a letter from chars according to that value
            for (i = 0; i < listOfInts.length; i++) {
                output += chars.substring(listOfInts[i], listOfInts[i]+1);
            }

            // add the output value to the text field
            document.getElementById("output").value = output;
        }
    </script>
</body>

</html>